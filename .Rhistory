# loading packages --------
library(data.table)
library(magrittr)
library(dplyr)
library(tidyr)
library(stringr)
library(readxl)
# import data and extract column needed --------
## occurrence table
dat.occ <-
fread("data/raw/occurrence.txt") %>%
Filter(function(x)!all(is.na(x)), .) %>%  # remove na column
.[, list(id = occurrenceID,
eventID,
Count = individualCount,
vernacularName)]
# bind region of site ----
site.region <-
read_xlsx("data/clean/02_樣區表_v2.7.xlsx", sheet = 2) %>%
setDT %>%
.[, list(Site = `樣區編號`, HJHsiu3, ELEV, X_wgs84, Y_wgs84)] %>%
.[ELEV %in% 2:3, region := "Mountain"] %>%
.[is.na(region), region := HJHsiu3] %>%
.[, list(Site, region, X_wgs84, Y_wgs84)]
library(rgdal)
# import data ----
dat.analysis <-
readRDS("data/clean/dat_pre.rds")
# shapefile of Taiwan (for trend map)
TW.poly <-
readOGR("data/clean/mapdata201805310314/COUNTY_MOI_1070516.shp") %>%
fortify()
library(ggplot2)
# shapefile of Taiwan (for trend map)
TW.poly <-
readOGR("data/clean/mapdata201805310314/COUNTY_MOI_1070516.shp") %>%
fortify()
library(stringr)
not <- c("not", "note", "knot", "nut")
str_view(not, "n.t")
install.packages("htmltools")
str_view(not, "n.t")
library(htmltools)
str_view(not, "n.t")
library(stringr)
str_view(not, "n.t")
install.packages("htmlwidgets")
str_view(not, "n.t")
pns <- c('pan', 'pen', 'pin', 'pon', 'pun')
str_view(pns, "p[aeiou]n")
str_view(pnx, "[[:alpha:]]")
str_view(pns, "[[:alpha:]]")
str_view(pns, "p[[:alpha:]]")
str_view(pns, "p[[:alpha:]]n")
str_view(pns, "p[aeiou][mn]")
df <- data.frame(runif(3), runif(3))
df
names(df) <- c(1, 2)
df
df$`3` <- df$`1` + df$`2`
df
x <- runif(1e6)
y <- list(x, x, x)
